# AI 生成提示词模板

本文件包含用于生成**专业级** Wiki 内容的 AI 提示词模板。

> **核心原则**：生成的文档必须 **详细、结构化、有图表、相互关联**，达到企业级技术文档标准。

## 目录

1. [通用要求](#通用要求)
2. [代码深度分析](#代码深度分析)
3. [模块文档](#模块文档)
4. [架构文档](#架构文档)
5. [API 文档](#api-文档)
6. [首页](#首页)
7. [关系图谱](#关系图谱)

---

## 通用要求

所有生成的文档必须遵循以下原则：

```
## 文档质量标准

### 内容深度
- 每个主题必须有 **完整的上下文说明**，不能只有标题和简单列表
- 描述必须 **详尽具体**，解释 WHY（为什么这样设计）和 HOW（如何实现）
- 必须包含 **实际代码示例**，不能只有抽象说明
- 必须说明 **边界情况、注意事项、常见陷阱**

### 结构化要求
- 使用 **层级标题**（H2/H3/H4）组织内容，形成清晰的信息层次
- 重要概念必须用 **表格** 呈现，便于快速查阅
- 流程性内容必须用 **Mermaid 图表** 可视化
- 相关内容必须有 **交叉链接**，形成文档网络

### 图表要求（每个文档至少包含 1-2 个图表）
- 架构关系 → flowchart
- 数据/调用流程 → sequenceDiagram
- 状态变化 → stateDiagram
- 类关系 → classDiagram
- 时间线/版本 → timeline
- 决策流程 → flowchart with conditions

### 文档关联
- 每个文档必须有 **"相关文档"** 章节，链接到关联页面
- 模块文档必须链接到：架构图中的位置、API 参考、依赖模块
- API 文档必须链接到：所属模块、使用示例、类型定义
```

---

## 代码深度分析

分析代码文件，提取完整的语义信息：

```
深度分析以下代码文件：

文件: {{ FILE_PATH }}
语言: {{ LANGUAGE }}
完整代码内容:
{{ CODE_CONTENT }}

请进行 **全面深度分析**，输出以下信息：

## 1. 模块概述
- **核心职责**：详细描述模块解决什么问题，为什么需要这个模块（3-5句）
- **设计理念**：采用了什么设计模式/架构思想，为什么这样设计
- **在系统中的位置**：与其他模块的关系，在整体架构中扮演什么角色

## 2. 公开接口（每个接口详细说明）
对于每个导出的函数/类/类型：
- 名称、签名、行号
- **详细描述**：做什么、怎么做、什么场景使用（不少于 2 句）
- **参数说明**：每个参数的含义、约束、默认值
- **返回值说明**：返回什么、可能的值、错误情况
- **使用示例**：实际代码示例
- **注意事项**：边界情况、性能考量、常见错误

## 3. 内部实现（帮助理解代码逻辑）
- **核心算法/逻辑流程**：用 Mermaid flowchart 展示
- **关键数据结构**：内部使用的重要数据结构
- **状态管理**：如果有状态，说明状态变化

## 4. 依赖关系
- **内部依赖**：依赖哪些项目内模块，为什么依赖
- **外部依赖**：使用哪些第三方库，用来做什么
- **被依赖**：哪些模块依赖本模块

## 5. 扩展性与维护
- **如何扩展**：添加新功能的推荐方式
- **潜在改进点**：可以优化的地方
- **测试建议**：关键测试场景

输出格式：结构化 YAML，包含上述所有字段
```

---

## 模块文档

生成专业的模块说明文档：

```
根据以下信息生成 **专业级模块文档**：

模块名: {{ MODULE_NAME }}
模块路径: {{ MODULE_PATH }}
文件列表: {{ FILE_LIST }}
代码分析结果: {{ CODE_ANALYSIS }}
项目上下文: {{ PROJECT_CONTEXT }}

---

## 生成要求

### 第一部分：模块概览（必须详细）
1. **模块简介**
   - 用 2-3 段文字详细描述模块的目的、解决的问题、核心价值
   - 说明模块在整个系统中的角色和重要性
   
2. **架构位置图**（Mermaid flowchart）
   - 展示本模块在系统架构中的位置
   - 标注与其他模块的依赖关系
   - 使用不同颜色/样式突出当前模块

3. **核心特性表格**
   | 特性 | 说明 | 相关接口 |
   |------|------|----------|
   | 特性1 | 详细说明 | `funcA`, `funcB` |

### 第二部分：技术细节

4. **文件结构说明**
   - 列出每个文件及其职责（不只是文件名）
   - 说明文件之间的关系

5. **核心流程图**（Mermaid sequenceDiagram 或 flowchart）
   - 展示模块的主要工作流程
   - 包含关键步骤和决策点

6. **公开接口详解**
   对每个公开接口：
   - 函数签名 + 源码链接
   - **详细描述**（不少于 3 句）
   - 参数表格（含约束和默认值）
   - 返回值说明
   - **完整使用示例**（可运行的代码）
   - 注意事项和边界情况

7. **类型定义**
   - 列出所有导出的类型
   - 每个类型的字段说明
   - 类型关系图（如适用）

### 第三部分：使用指南

8. **快速开始**
   - 安装/引入方式
   - 最简使用示例
   - 预期输出

9. **常见用例**（至少 3 个）
   每个用例包含：
   - 场景描述
   - 完整代码示例
   - 运行结果

10. **最佳实践**
    - 推荐的使用方式
    - 应该避免的做法
    - 性能优化建议

### 第四部分：深度信息

11. **设计决策**
    - 为什么选择这种实现方式
    - 考虑过的替代方案
    - 权衡取舍

12. **内部实现原理**（帮助高级用户理解）
    - 核心算法说明
    - 数据流图
    - 状态管理（如有）

13. **错误处理**
    - 可能的错误类型
    - 错误处理建议
    - 调试技巧

### 第五部分：关联信息

14. **依赖关系图**（Mermaid flowchart）
    - 本模块依赖的模块
    - 依赖本模块的模块

15. **相关文档链接**
    - 架构文档中的相关章节
    - API 参考
    - 相关模块文档
    - 外部资源

16. **变更历史**（如有）
    - 重要版本变更
    - 废弃的接口

---

格式：Markdown，使用中文，代码示例使用项目主要语言
```

---

## 架构文档

生成系统架构概览：

```
根据以下项目信息生成 **专业级架构文档**：

项目名: {{ PROJECT_NAME }}
技术栈: {{ TECH_STACK }}
模块列表: {{ MODULES }}
入口文件: {{ ENTRY_POINTS }}
代码分析: {{ CODE_ANALYSIS }}

---

## 生成要求

### 1. 执行摘要
- 项目定位和核心价值（1 段）
- 技术选型概述（1 段）
- 架构风格说明（分层/微服务/事件驱动等）

### 2. 系统架构图（Mermaid flowchart TB）
要求：
- 分层展示（UI层、业务层、数据层等）
- 每层内的模块用 subgraph 分组
- 用箭头标注数据流向和依赖关系
- 用不同颜色区分模块类型
- 标注关键接口和协议

示例结构：
\`\`\`mermaid
flowchart TB
    subgraph Presentation["表现层"]
        direction LR
        UI["UI 组件"]
        Pages["页面"]
    end
    
    subgraph Business["业务层"]
        Services["服务"]
        Hooks["Hooks"]
    end
    
    subgraph Data["数据层"]
        API["API 客户端"]
        Store["状态管理"]
    end
    
    Presentation --> Business
    Business --> Data
\`\`\`

### 3. 技术栈详解
| 类别 | 技术 | 版本 | 选型原因 | 官方文档 |
|------|------|------|----------|----------|
| 框架 | React | 18.x | 组件化、生态丰富 | [链接] |

### 4. 模块划分详解
对每个模块：
- **模块名称** + 文档链接
- **职责描述**（详细）
- **核心接口**（列表）
- **依赖关系**

### 5. 数据流图（Mermaid sequenceDiagram）
展示典型场景的完整数据流：
- 用户操作 → UI → 业务逻辑 → 数据层 → 外部服务
- 包含请求和响应
- 标注异步操作

### 6. 模块依赖关系图（Mermaid flowchart）
- 展示所有模块间的依赖
- 用箭头方向表示依赖方向
- 标注依赖类型（强依赖/弱依赖）

### 7. 目录结构说明
\`\`\`
project/
├── src/
│   ├── components/    # UI 组件 - [详细说明]
│   ├── services/      # 业务服务 - [详细说明]
│   └── utils/         # 工具函数 - [详细说明]
\`\`\`

### 8. 设计原则与模式
- 采用的设计模式（列表 + 说明）
- 代码组织原则
- 命名规范

### 9. 扩展指南
- 如何添加新模块
- 如何添加新功能
- 代码贡献流程

### 10. 相关文档
- 各模块文档链接表格
- 外部依赖文档

---

Mermaid 规范：
- 节点 ID 只用字母数字下划线
- 标签用双引号包裹中文
- 使用 style 定义不同模块类型的颜色
```

---

## API 文档

生成 API 参考文档：

```
为以下模块生成 **专业级 API 文档**：

模块名: {{ MODULE_NAME }}
代码分析: {{ CODE_ITEMS }}

---

## 生成要求

### 文档结构

1. **模块概述**
   - 模块用途（详细）
   - 导入方式
   - 快速示例

2. **接口总览表**
   | 接口 | 类型 | 描述 | 源码 |
   |------|------|------|------|
   | `funcA` | 函数 | 简述 | [📄](link) |

3. **类型定义**（放在函数之前）
   对每个类型：
   - 类型签名
   - 字段表格（字段名、类型、必填、描述）
   - 使用示例

4. **函数详解**
   对每个函数，使用以下格式：

   ---
   
   ### `functionName` [📄](file://path#L行号)
   
   > 一句话概述
   
   **详细描述**
   
   详细说明函数的作用、使用场景、工作原理。不少于 3 句话。
   说明在什么情况下应该使用这个函数，以及它解决什么问题。
   
   **函数签名**
   \`\`\`typescript
   function functionName(param1: Type1, param2?: Type2): ReturnType
   \`\`\`
   
   **参数**
   
   | 参数 | 类型 | 必填 | 默认值 | 描述 |
   |------|------|------|--------|------|
   | param1 | `Type1` | ✅ | - | 详细描述参数用途和约束 |
   | param2 | `Type2` | ❌ | `默认值` | 详细描述 |
   
   **返回值**
   
   | 类型 | 描述 |
   |------|------|
   | `ReturnType` | 详细描述返回值，包括可能的值和边界情况 |
   
   **异常**
   
   | 异常类型 | 触发条件 | 处理建议 |
   |----------|----------|----------|
   | `TypeError` | 参数类型错误时 | 检查参数类型 |
   
   **示例**
   
   \`\`\`typescript
   // 基础用法
   const result = functionName('value');
   console.log(result); // 预期输出
   
   // 高级用法
   const result2 = functionName('value', { option: true });
   \`\`\`
   
   **注意事项**
   - ⚠️ 注意点 1
   - ⚠️ 注意点 2
   
   **相关接口**
   - [`relatedFunc`](#relatedfunc) - 关联说明
   
   ---

5. **类详解**（如有）
   - 类描述
   - 构造函数
   - 属性表格
   - 方法列表（链接到详细说明）
   - 继承关系图（Mermaid classDiagram）
   - 完整使用示例

6. **使用模式**
   展示 2-3 个完整的使用场景，包含：
   - 场景描述
   - 完整代码
   - 预期结果

7. **常见问题**
   - Q: 问题
   - A: 解答

8. **相关文档**
   - 模块文档链接
   - 架构文档链接
   - 外部资源

---

链接格式: [📄](file://{{ SOURCE_PATH }}#L{{ LINE_NUMBER }})
```

---

## 首页

生成项目首页：

```
生成项目 Wiki **专业级首页**：

项目名: {{ PROJECT_NAME }}
技术栈: {{ TECH_STACK }}
模块数: {{ MODULES_COUNT }}
文件数: {{ FILES_COUNT }}
项目描述: {{ PROJECT_DESCRIPTION }}

---

## 生成要求

### 1. 标题区
- 项目名称 + 徽章（技术栈、版本、构建状态）
- 一句话项目定位

### 2. 项目简介（详细）
- 2-3 段文字描述项目背景、目标、核心价值
- 适合什么场景使用
- 主要解决什么问题

### 3. 系统架构预览图（Mermaid flowchart）
- 简化的架构图，展示核心模块关系
- 点击可跳转到详细架构文档

### 4. 核心特性
用卡片式布局展示 4-6 个核心特性：
| 🚀 特性名称 | 📦 特性名称 |
|-------------|-------------|
| 详细描述... | 详细描述... |

### 5. 文档导航（表格）
| 文档 | 描述 | 适合人群 |
|------|------|----------|
| [🚀 快速开始](getting-started.md) | 5 分钟上手指南 | 新用户 |
| [🏗 架构概览](architecture.md) | 系统设计和模块结构 | 开发者 |
| [📦 模块文档](modules/_index.md) | 各模块详细说明 | 开发者 |
| [📖 API 参考](api/_index.md) | 接口文档 | 开发者 |

### 6. 快速开始代码块
\`\`\`bash
# 安装
npm install {{ PROJECT_NAME }}

# 使用
\`\`\`

\`\`\`javascript
// 快速示例
import { xxx } from '{{ PROJECT_NAME }}';
// ...
\`\`\`

### 7. 项目结构概览
\`\`\`
{{ PROJECT_NAME }}/
├── src/
│   ├── components/   # UI 组件
│   ├── services/     # 业务逻辑
│   └── utils/        # 工具函数
├── docs/             # 文档
└── tests/            # 测试
\`\`\`

### 8. 核心模块速览（表格）
| 模块 | 描述 | 文档 |
|------|------|------|
| [模块名](modules/xxx.md) | 详细描述模块职责 | [API](api/xxx.md) |

### 9. 技术栈一览
| 类别 | 技术 | 说明 |
|------|------|------|
| 框架 | React | 前端 UI 框架 |

### 10. 项目统计
| 指标 | 数值 |
|------|------|
| 📁 代码文件 | {{ TOTAL_FILES }} |
| 📦 模块数 | {{ TOTAL_MODULES }} |
| 📄 文档数 | {{ TOTAL_DOCS }} |

### 11. 贡献指南链接
- 如何贡献代码
- 问题反馈渠道

### 12. 页脚
*由 Mini-Wiki 自动生成 | {{ GENERATED_AT }}*
```

---

## 关系图谱

生成文档关系图谱：

```
根据项目结构生成 **文档关系图谱**：

模块列表: {{ MODULES }}
文档列表: {{ DOCS }}

---

## 生成要求

### 1. 全局文档地图（Mermaid flowchart）
展示所有文档之间的关系：
- 首页为中心节点
- 架构文档、模块文档、API 文档为二级节点
- 各具体文档为三级节点
- 用不同颜色区分文档类型
- 用箭头表示阅读顺序/依赖关系

### 2. 模块依赖矩阵
| 模块 | 依赖 | 被依赖 |
|------|------|--------|
| moduleA | moduleB, moduleC | moduleD |

### 3. 阅读路径推荐
根据读者角色推荐阅读路径：
- **新手入门**: 首页 → 快速开始 → 核心模块
- **架构理解**: 架构文档 → 模块文档 → 设计决策
- **API 查阅**: API 索引 → 具体 API → 使用示例

### 4. 文档索引
按类别列出所有文档，包含简短描述和链接
```
